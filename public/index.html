<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="./js/erizo.js" type="text/javascript"> </script>
    

    <script src="./js/jssip-0.2.0.js" type="text/javascript"> </script>
    <script src="./js/sip.js" type="text/javascript"> </script>

    <script src="./js/licodeApi.js" type="text/javascript"></script>
    
</head>
<body>
    test
    <audio autoplay="autoplay" id="remoteAudio"></audio>
    <div id="streamcontainer"></div>
    <div id="messages"></div>
</body>

<script type="text/javascript">
        var roomname = "test32";
        var username = "test1";
        $(document).ready(function() {
            connectToRoom(username, "presenter", roomname, function(roomEvent) { //roomConnectedCallback
              msg("roomConnectedCallback");
              var streams = roomEvent.streams;
              subscribeToStreams(roomname, streams, null);
            }, function(stream) { //streamAddedCallback
              msg("streamAddedCallback");
              subscribeToStreamByRoomnameAndStream(roomname, stream);
            }, function(stream) { //streamSubscribed
              msg("streamSubscribed");
              if(stream.hasAudio()) { //Only audio streams
                
                //if(stream.getID() != localStream.getID())
                
                var mediaStreamSource = audioContext.createMediaStreamSource( stream.stream );
                mediaStreamSource.connect(answerLstream);

                 $("#streamcontainer").append('<div class="audio" id="audio' + stream.getID() + '" style="width: 290px; height: 100px;"></div>')
                 stream.show("audio" + stream.getID());
                 $("audio, .audio").remove();
              }
            }, function(stream) { //streamRemovedCallback
              msg("streamRemovedCallback");
              $("#streamcontainer").find("#video"+stream.getID()).remove();
            }, function() { //roomDisconnectedCallback
              msg("roomDisconnectedCallback");
            });
        });
        function msg(msg) {
          $("#messages").text($("#messages").text()+"\n"+msg)
        }
    </script>
</html>